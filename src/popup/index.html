<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Session Cookie Bridge</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="app">
      <header class="app-header">
        <h1>Session Cookie Bridge v2</h1>
        <p>Best-effort cookie session export/import with signed artifacts.</p>
        <p class="warning-line">Sensitive data: treat exported artifacts as secrets.</p>
      </header>

      <nav class="tabs" aria-label="Session actions">
        <button id="tabExportButton" class="tab active" type="button" data-tab="export">Export</button>
        <button id="tabImportButton" class="tab" type="button" data-tab="import">Import</button>
      </nav>

      <section id="statusPanel" class="panel status info" role="status" aria-live="polite">
        Ready. Choose Export or Import.
      </section>

      <section id="exportPanel" class="panel tab-panel">
        <h2>Export Signed Session</h2>
        <label for="targetUrlInput">Target URL</label>
        <div class="row">
          <input id="targetUrlInput" type="url" placeholder="https://example.com/" />
          <button id="detectTabButton" type="button">Use Active Tab</button>
        </div>

        <div class="row row-actions">
          <button id="requestPermissionButton" type="button">Request Permission</button>
          <button id="exportSessionButton" type="button">Export Signed Session</button>
        </div>

        <div class="output-block">
          <div class="output-head">
            <label for="cookieHeaderPreview">Cookie Header</label>
            <button id="copyHeaderButton" type="button">Copy Header</button>
          </div>
          <textarea id="cookieHeaderPreview" readonly></textarea>
        </div>

        <div class="output-block">
          <label for="fingerprintPreview">Signer Fingerprint</label>
          <input id="fingerprintPreview" type="text" readonly />
        </div>

        <div class="output-block">
          <div class="output-head">
            <label for="artifactPreview">Signed Artifact JSON</label>
            <button id="copyArtifactButton" type="button">Copy JSON</button>
          </div>
          <textarea id="artifactPreview" readonly></textarea>
        </div>

        <div class="actions">
          <button id="downloadArtifactButton" type="button">Download Signed JSON</button>
        </div>
      </section>

      <section id="importPanel" class="panel tab-panel hidden">
        <h2>Verify and Import Session</h2>
        <label for="artifactFileInput">Artifact File (optional)</label>
        <input id="artifactFileInput" type="file" accept=".json,application/json" />

        <div class="output-block">
          <label for="artifactInput">Artifact JSON</label>
          <textarea id="artifactInput" placeholder='{"schema_version":2,...}'></textarea>
        </div>

        <div class="row row-actions">
          <button id="verifyArtifactButton" type="button">Verify Artifact</button>
          <button id="importSessionButton" type="button">Import Session</button>
        </div>

        <section id="verifyPanel" class="panel nested hidden">
          <h3>Verification</h3>
          <div id="verifySummary" class="meta"></div>
        </section>

        <section id="importReportPanel" class="panel nested hidden">
          <h3>Import Report</h3>
          <div id="importSummary" class="meta"></div>
          <ul id="importResultsList" class="result-list"></ul>
        </section>
      </section>
    </main>

    <script type="module" src="./main.ts"></script>
  </body>
</html>
